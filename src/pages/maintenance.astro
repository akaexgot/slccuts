---
export const prerender = false;
import { supabase } from "../lib/supabase";
import MosaicBackground from "../components/ui/MosaicBackground.astro";

// Check if maintenance mode is enabled
const { data: maintenanceSetting } = await supabase
    .from("settings")
    .select("value")
    .eq("key", "maintenance_mode")
    .single();

const isMaintenanceMode = maintenanceSetting?.value ?? false;

// If not in maintenance mode, redirect to home
if (!isMaintenanceMode) {
    return Astro.redirect("/");
}
---

<!doctype html>
<html lang="es" style="background-color: #000000 !important;">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <meta name="robots" content="noindex, nofollow" />
        <link rel="icon" type="image/png" href="/logo.png" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@300;400;500;600&display=swap"
            rel="stylesheet"
        />
        <title>Mantenimiento | SLC CUTS</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <style is:inline>
            :root {
                color-scheme: dark;
            }
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            body {
                font-family: "Outfit", sans-serif !important;
                background-color: #000000 !important;
                color: #ffffff !important;
                min-height: 100vh;
                margin: 0;
                padding: 0;
            }
            .bebas {
                font-family: "Bebas Neue", sans-serif !important;
                letter-spacing: 0.05em;
            }
            .admin-link {
                position: fixed;
                bottom: 20px;
                right: 20px;
                font-size: 10px;
                text-transform: uppercase;
                letter-spacing: 0.15em;
                color: #555;
                transition: color 0.3s;
                text-decoration: none;
                z-index: 100;
            }
            .admin-link:hover {
                color: #888;
            }
        </style>
    </head>
    <body
        style="background-color: #000000 !important; color: #ffffff !important;"
    >
        <!-- Mosaic Background -->
        <MosaicBackground mode="dark" />

        <!-- Main Content Overlay -->
        <div
            class="relative z-10 flex flex-col min-h-screen"
            style="background: transparent;"
        >
            <!-- Header -->
            <header style="text-align: center; padding: 40px 20px 20px;">
                <img
                    src="/logoblancotransparente.png"
                    alt="SLC CUTS"
                    style="height: 35px !important; width: auto; margin: 0 auto 20px; opacity: 0.8; display: block;"
                />

                <div style="max-width: 600px; margin: 0 auto;">
                    <h1
                        class="bebas"
                        style="font-size: clamp(24px, 6vw, 40px); margin-bottom: 10px; color: #ffffff !important;"
                    >
                        MANTENIMIENTO PROGRAMADO
                    </h1>

                    <p
                        style="color: #a1a1aa !important; font-size: 14px; font-weight: 300; line-height: 1.5;"
                    >
                        Estamos actualizando nuestro sistema.<br />
                        Puedes reservar tu cita directamente aquí debajo.
                    </p>
                </div>
            </header>

            <!-- Setmore Section -->
            <main
                style="flex: 1; width: 100%; max-width: 1000px; margin: 0 auto; padding: 0 15px 40px;"
            >
                <div
                    style="background: #000000; border: 1px solid rgba(255,255,255,0.1); border-radius: 20px; overflow: hidden; box-shadow: 0 20px 40px rgba(0,0,0,0.5);"
                >
                    <div style="background: #000000; width: 100%;">
                        <iframe
                            src="https://slccuts.setmore.com/"
                            width="100%"
                            height="1000"
                            frameborder="0"
                            scrolling="yes"
                            style="width: 100%; height: 75vh !important; display: block; filter: invert(0);"
                            title="Reservar Cita"></iframe>
                    </div>
                </div>

                <!-- Footer Info -->
                <div
                    style="text-align: center; margin-top: 15px; padding-bottom: 10px;"
                >
                    <p
                        style="color: #52525b; font-size: 9px; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 10px;"
                    >
                        ¿Necesitas ayuda?
                    </p>
                    <div
                        style="display: flex; justify-content: center; gap: 15px; font-size: 11px;"
                    >
                        <a
                            href="tel:+34722108440"
                            style="color: #71717a; text-decoration: none;"
                            >722 10 84 40</a
                        >
                        <span style="color: #27272a;">|</span>
                        <a
                            href="https://wa.me/34722108440"
                            target="_blank"
                            style="color: #71717a; text-decoration: none;"
                            >WhatsApp</a
                        >
                        <span style="color: #27272a;">|</span>
                        <a
                            href="https://instagram.com/slc.cuts"
                            target="_blank"
                            style="color: #71717a; text-decoration: none;"
                            >Instagram</a
                        >
                    </div>
                </div>
            </main>
        </div>

        <!-- Admin Access -->
        <a href="/login" class="admin-link">Admin Access</a>
    </body>
</html>
