---
interface Props {
    phrases: string[];
}

const { phrases } = Astro.props;
// Repeat phrases enough times to fill screen
const segments = Array(5).fill(phrases).flat();
---

<div
    class="relative flex overflow-hidden bg-[#050505] text-white py-8 border-y border-white/5 select-none group"
>
    <!-- Seamless Loop Layers -->
    <div
        class="animate-marquee whitespace-nowrap flex items-center flex-shrink-0 min-w-full"
    >
        {
            segments.map((seg, i) => (
                <div class="flex items-center">
                    <span class="text-4xl md:text-5xl uppercase tracking-[0.4em] mx-12 font-bebas leading-relaxed inline-block pt-1 opacity-40 group-hover:opacity-100 transition-opacity duration-1000">
                        {seg}
                    </span>
                    <span class="text-2xl mx-6 font-sans text-white/10 group-hover:text-white/40 transition-colors">
                        ✦
                    </span>
                </div>
            ))
        }
    </div>

    <div
        class="animate-marquee whitespace-nowrap flex items-center flex-shrink-0 min-w-full"
        aria-hidden="true"
    >
        {
            segments.map((seg, i) => (
                <div class="flex items-center">
                    <span class="text-4xl md:text-5xl uppercase tracking-[0.4em] mx-12 font-bebas leading-relaxed inline-block pt-1 opacity-40 group-hover:opacity-100 transition-opacity duration-1000">
                        {seg}
                    </span>
                    <span class="text-2xl mx-6 font-sans text-white/10 group-hover:text-white/40 transition-colors">
                        ✦
                    </span>
                </div>
            ))
        }
    </div>
</div>

<style>
    /* Safe fallback if tailwind config fails or for double-layered seamless loop */
    .animate-marquee {
        animation: marquee 40s linear infinite;
    }
    @keyframes marquee {
        0% {
            transform: translateX(0);
        }
        100% {
            transform: translateX(-100%);
        }
    }
</style>
